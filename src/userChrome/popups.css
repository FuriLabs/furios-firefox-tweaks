/* Copyright 2024 Oliver Smith, user0, Peter Mack *
 * SPDX-License-Identifier: MPL-2.0 */

@media (max-width: 700px) {
    /* Fix panels that are misplaced when the URL bar is at the bottom */
    panel[side="top"], box.panel-viewstack, #appMenu-popup {
        height: max-content !important;
        min-height: max-content !important;
        max-height: 80vh !important;
        min-width: 100% !important;
        width: max-content !important;
        max-width: 100vw !important;
        margin-bottom: 4px !important;
        border-bottom-left-radius: 0 !important;
        border-radius: 0 !important;
        padding: 0 !important;
    }

    /* Wonky rule to ensure the GNOME CSS doesn't override this :( */
    panelmultiview, panelmultiview > *, panelmultiview * panelview,
    body #identity-popup-mainView, body #permission-popup-mainView,
    body #protections-popup-mainView, body #identity-popup-mainView-panel-header
    {
        flex: 1 !important;
        flex-shrink: 0 !important;
        max-width: -moz-available !important;
        min-width: -moz-available !important;
        margin: 0 !important;
        padding: 0 !important;
        position: relative !important;
    }

    /* Allow extensions to use full popup */
    .webextension-popup-browser {
        height: 100% !important;
        min-height: 100% !important;
        width: 100vw !important;
        min-width: 100vw !important;
    }

    /* Menu that appears when long-pressing the back-button */
    #backForwardMenu {
        margin-top: -250px;
        height: 200px;
        min-height: 200px;
        max-width: 100vw !important;
    }

    /* Hide some context menu items,
     * hide 'Customize Toolbar' in overflow menu */
    #context-inspect,
    #context-inspect-a11y,
    #context-savelinktopocket,
    #context-searchselect,
    #context-sendlinktodevice,
    #context-viewpartialsource-selection,
    #inspect-separator,
    #overflowMenu-customize-button {
        display: none !important
    }

    /* Adjust dialogues like "Confirm before closing multiple
     * tabs" or "Allow open in app" */
    .dialogFrame {
        max-width: 100%;
    }

}
